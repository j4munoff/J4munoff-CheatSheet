# Metodología

Es muy importante en pentesting tener una metodología de trabajo y **siempre** utilizarla para cualquier auditoría. Es importante porque nos creará **hábito** y al final veremos resultados.

Es muy difícil definir una metodología única ya que es algo muy personal. Cada uno se sentirá mas cómodo utilizando unas herramientas u otras. Lo importante es que se tenga una y que siempre se utilize.

A modo de consejos se indican algunas pautas metodológicas consideradas como buenas practicas.

A medida que aprendamos se irán cogiendo pautas metodológicas que iremos anotando aquí.

Por tanto esta página **es modificable en el tiempo**. HAy que tenerlo en cuenta y revisar de vez en cuando.

## Enumeración.

Se dice que las tres principales tareas del pentesting son enumerar, enumerar y volver a enumerar.

Cuanto mas y mejor enumeremos el sistema más fácil es encontrar un vector de explotación.

Siempre tener en cuenta:

* Enumerar en busca de puertos con nmap.
* Si no nos convence, enumerar rangos de puertos UDP con nmap.
* Si tenemos un servicio SMB utilizar mas de una herramienta para enumerarlo. No siempre ofrecen el mismo resultado. CrackMapExec, smbclient, smbmap, ....
* Si tenemos un servicio Web enumerar con diferentes herramientas:
    * Opción --script http_enum de nmap
    * gobuster
    * dirbuster
    * wfuzz
* En la enumeración de buscar en este orden:
    * Subdirectorios
    * Ficheros por extensión, ejemplo ".php"
    * Subdominios
* Si encontramos usuarios potenciales en una página, por ejemplo "John Smith", crear un listado de usuarios con las combinaciones mas usuales, jsmith, john.smith, .... Nos puede ayudar en ataques por diccionario.

## Tomar notas.

Es muy importante anotar todo. Cada persona tendrá sus preferencias. Notepad, Word en la máquina host, Cherrytree, Sublime Text, Obsidian, etc. Es indiferente que use cada uno para anotar mientras se anote **TODO**.

Cuando decimos todo, es todo:

* Información del objetivo, IP, sistema operativo, nombre, dominio, ...
* Resultado de escaneos, puertos abiertos, servicios que ejecutan esos puertos, versiones.
* Posibles usuarios encontrados, contraseñas, credenciales, hashses, ...
* Vulnerabilidades encontradas, información sobre esta.
* En la explotación anotar el vector de ataque, la forma de explotación, copiar script utilizado si lo hay, ...
* Lo mismo en la escalada de privilegios. Anotar que técnica se utiliza, como.
* En el caso de CTFs, anotar las banderas. Ver en [Introducción de Writeups][def] lo que es CFT y las banderas.
* Tomar capturas de pantalla.
* ...

Todas estás anotaciones serán de gran ayuda para:
* En caso de tener que reintentar por no haber podido acabar, no duplicar el trabajo.
* En la realización de los informes ejecutivo y técnico de una auditoría.

A modo de ejemplo, comentar que en la parte de [Configuración del entorno](caracter-general/entornos-trabajo/configuracion-del-entorno.md) se describe la instalación de la herramienta **Cherrytree**. Esta es una herramienta muy util para tomar notas ya que admite texto, imágenes, lenguajes de marcado, etc..

Mostramos una imagen que describe como se estructuran las notas:

![](/.gitbook/assets/kali44.png)


[def]: writeups/introduccion.md